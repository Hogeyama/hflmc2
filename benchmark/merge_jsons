#! /bin/sh
jq -s '
.
| .[0] as $in0
| .[1] as $in1
| { in0 : $in0.meta
  , in1 : $in1.meta
  } as $meta
| reduce range(0; $in0|.results|length) as $i
    ([]; . + [{ file: $in0|.results|.[$i]|.file
              , in0 : $in0|.results|.[$i]|.result
              , in1 : $in1|.results|.[$i]|.result
              }])
| . as $results
| { meta : $meta, results : $results }
' $1 $2

# Usage
# ./benchmark/merge_jsons 1.json 2.json | jq '.results | .[] | select((.in0|.[0]=="Success") and (.in1|.[0]!="Success"))'
